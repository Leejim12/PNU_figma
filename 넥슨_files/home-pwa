function loadNCC(n){drawFloating();callNCCList(n)}function reCallNcc(n){callNCCList(n)}function drawFloating(){var i=$("#wrapper"),n=$('<div class="floating floatingNccEnable"><\/div>'),t=$('<div class="floatingBt" id="floatingBt"><\/div>'),r=$('<div class="floatingNcc"><\/div>');t.append('<a href="#top" class="btTop" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Anchor_Top"}\'><span class="icon"><\/span><span>TOP<\/span><\/a>');n.append(t).append(r);i.append(n);$OASIS.Cookie.get("NCC_FOLD")=="1"&&($(".floating").removeClass("floatingNccEnable"),$(".floating").removeClass("floatingNccShow"))}function drawNcc(n,t){var r=n.thumbnailImage,f,i,h,c,u;ie&&r.indexOf("i.ytimg.com")>-1&&r.indexOf(".webp")>-1&&(r="https://rs.nxfs.nexon.com/home/images/main/img_ncc_thumbnail_notice_0"+(Math.floor(Math.random()*2)+1)+".png");f=$("#floatingBt");i=$('<a href="#ncc" class="btNcc" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Video","Type":"ToastPopOpen","Value":"'+n.contentId+'","Gamecode":"'+n.serviceId+"\"}'><\/a>");i.append('<span class="icon"><\/span>');i.append('<span class="nccImg"><span><img src="'+r+'" width="110" alt=""><\/span><\/span>');i.append('<span class="nccTip">원래대로 펼치기<\/span>');i.append('<span class="nccText">추천동영상<\/span>');$(".btNcc").remove();f.append(i);var l=$(".floating"),e=$('<div class="floatingNcc"><\/div>'),o=$('<div class="nccItem"><\/div>'),s=$('<a href="#ncc" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Video","Type":"ToastPopContents","Value":"'+n.contentId+'","Gamecode":"'+n.serviceId+"\"}'><\/a>"),a=$('<span class="nccImg"><span><img src="'+r+'" width="260" alt=""><\/span><\/span>'),v=$('<span class="nccSentence">'+n.sentence+"<\/span>"),y=$('<span class="nccTit">'+n.title+"<\/span>");s.append(a).append("<h3>NCC <span>βeta<\/span><\/h3>").append(v).append(y);h=$('<button type="button" class="btRefrech" onclick="reCallNcc('+t+');sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Video","Type":"ToastPopRefresh","Value":"'+n.contentId+'","Gamecode":"'+n.serviceId+"\"}'>다른영상보기<\/button>");c=$('<button type="button" class="btFold" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Video","Type":"ToastPopClose","Value":"'+n.contentId+'","Gamecode":"'+n.serviceId+"\"}'>최소화<\/button>");o.append(s).append(h).append(c);e.append(o);$(".floatingNcc").remove();l.append(e);$(".nccItem .btFold").on("click",function(n){n.preventDefault();$(".floating").removeClass("floatingNccEnable");$(".floating").removeClass("floatingNccShow");$OASIS.Cookie.set("NCC_FOLD","1",3)});$(".floatingBt .btNcc").on("mouseover",function(n){var t=$(".floating");n.preventDefault();t.hasClass("floatingNccEnable")&&t.addClass("floatingNccShow")});$(".floating .floatingNcc").on("mouseleave",function(){var n=$(".floating");n.hasClass("floatingNccShow")&&n.removeClass("floatingNccShow")});$(".floatingBt .btNcc").on("click",function(n){var t=$(".floating");n.preventDefault();t.addClass("floatingNccShow");t.addClass("floatingNccEnable");$OASIS.Cookie.remove("NCC_FOLD")});$(".nccItem a").on("click",function(){var n=JSON.parse($(this).attr("opt"));drawPlayer(n.Value);$(".ncc").addClass("nccShow");$("body").addClass("scrollHide")});u=function(){var n=$(".floating"),i=$(".footer").offset(),r=i.top-$(window).height(),t=$(window).scrollTop();t!=0?n.addClass("floatingTopBtShow"):n.removeClass("floatingTopBtShow");t<r?n.removeClass("floatingTopBtHold"):n.addClass("floatingTopBtHold")};$(window).scroll(u);$(window).ready(u)}function drawPlayer(n){var i=$("#ncc"),t;i.length==0&&(i=NgbMember.IsLogin()?$('<div class="ncc nccLogin" id="ncc"><div class="nccPlayerFrame" id="nccPlayer"><\/div><\/div>'):$('<div class="ncc" id="ncc"><div class="nccPlayerFrame" id="nccPlayer"><\/div><\/div>'));$("#wrapper").after(i);t=[];t.push({key:"id",value:"nccPlayerScript"});t.push({key:"src",value:nccUrl+"/ncc_player_v2.js"});loadScript(t,function(){var t=document.querySelector("#nccPlayer"),i=nccUrl+"/?serviceId=430176232&contentId="+n+"&loc=NX_MAIN";t.innerHTML="<iframe id='NCCPlayerFrame' src='"+i+"' width='954px' height='621px' allow='autoplay' allowfullscreen frameborder='0' scrolling='no'><\/iframe>";stopVideo()})}function loadScript(n,t){var u="",f=document.createElement("script"),i,r;for(t&&(f.onload=t),i=0;i<n.length;i++)f.setAttribute(n[i].key,n[i].value),n[i].key=="id"&&(u=n[i].value);u&&(r=document.querySelector("#"+u),r&&r.parentNode.removeChild(r));document.body.appendChild(f)}function hideNcc(){$("body").removeClass("scrollHide");$(".ncc").removeClass("nccShow");$(".nccPlayer").remove();$(".floatingNcc").remove();$(".btNcc").remove()}function callNCCList(n,t){var i={};i=$OASIS.SessionStorage.get("nccList_"+n,!0);i?i.list.length>0?(ncc_index=ncc_index<i.list.length-1?ncc_index+1:0,drawNcc(i.list[ncc_index],n),t!=undefined&&t!=""&&msgLayer(t)):hideNcc():(i={},$.ajax({url:myapi+"/Live/getNCCList?st=sso",data:"serviceId=430176232",dataType:"json",type:"GET",xhrFields:{withCredentials:!0}}).done(function(r){var e,u,f;if(i.list=[],e=[],r&&r.nccList.length>0){ncc_index=0;for(u in r.nccList)for(f in r.nccList[u].contents)r.nccList[u].contents[f].keyword=r.nccList[u].keyword,r.nccList[u].contents[f].sentence=r.nccList[u].sentence,e.push(r.nccList[u].contents[f]);i.list=e.sort(function(n,t){return t.score-n.score});$OASIS.SessionStorage.set("nccList_"+r.MemberSN,i,!0,10);drawNcc(i.list[ncc_index],n);t!=undefined&&t!=""&&msgLayer(t)}else hideNcc()}).fail(function(){$.ajax({url:"https://s3.ap-northeast-2.amazonaws.com/ncc.content.safe.storage/ncccontent/ncccontents.json",dataType:"json",type:"GET"}).done(function(r){var e,u,f;if(i.list=[],e=[],r&&r.length>0){ncc_index=0;for(u in r)for(f in r[u].contents)r[u].contents[f].keyword=r[u].keyword,r[u].contents[f].sentence=r[u].sentence,e.push(r[u].contents[f]);i.list=e.sort(function(n,t){return t.score-n.score});$OASIS.SessionStorage.set("nccList_"+n,i,!0,10);drawNcc(i.list[ncc_index],n);t!=undefined&&t!=""&&msgLayer(t)}else hideNcc()})}).always(function(){}))}function msgLayer(n){$(".ncc .msgLayer").text(n);$(".ncc .msgLayer").addClass("active");setTimeout(function(){$(".ncc .msgLayer").removeClass("active")},1700)}function resizeNCCViewLayer(n,t){var i=$(".ncc .nccPlayerFrame");n&&(i.css("width",n+"px"),i.css("margin-left","-"+Math.round(n/2)+"px"));t&&(i.css("height",t+"px"),i.css("margin-top","-"+Math.round(t/2)+"px"))}function closeNCCViewLayer(){$(".ncc").removeClass("nccShow");$("body").removeClass("scrollHide")}function createPlayer(n){return new YT.Player("ytPlayer_"+n,{videoId:n,playerVars:{origin:$(document).prop("location").origin},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange,onError:onPlayerError}})}function onYouTubeIframeAPIReady(){$.each(video_ids,function(n,t){player.push(createPlayer(t))})}function onPlayerReady(){}function onPlayerStateChange(n){n.data==1?(video_playing=!0,promotionBannerCnts.autoplay.stop()):(n.data==0||n.data==2)&&(video_playing=!1,promotionBannerCnts.autoplay.start(),n.data==0&&n.target.stopVideo())}function onPlayerError(n){console.log(n)}function stopVideo(){$.each(player,function(n,t){t.stopVideo()})}function setGifImage(n){var t=$(n).data("gif"),i;t!=""&&(i=$('<span class="aniImg"><img src="'+t+'" width="302" height="200"><\/span>'),$(n).after(i))}function getGameNameByGameCode(n){var t="noName";return $.each(gameData,function(i,r){r.basicGameInfo.gameCode==n&&(t=r.basicGameInfo.gameName)}),t}function getIconByServiceId(n){var t="https://ssl.nexon.com/s2/p3/etc/gameimg_default_155.png";return $.each(gameData,function(i,r){r.basicGameInfo.serviceID==n&&(t=getGameImage(r.extendGameInfo.gameImageList,"fileGnbDirect"))}),t}function getIconByGameCode(n){var t="https://ssl.nexon.com/s2/p3/etc/gameimg_default_155.png";return $.each(gameData,function(i,r){r.basicGameInfo.gameCode==n&&(t=getGameImage(r.extendGameInfo.gameImageList,"fileGnbDirect"))}),t}function getGameCodeByServiceId(n){var t="0";return $.each(gameData,function(i,r){r.basicGameInfo.serviceID==n&&(t=r.basicGameInfo.gameCode)}),t}function getHomeUrlByServiceId(n){var t="";return $.each(gameData,function(i,r){r.basicGameInfo.serviceID==n&&(t=r.extendGameInfo.gameWebUrl.pcSiteUrl)}),t}function getGameImage(n,t){var i="";return $.each(n,function(n,r){r.gameImageType==t&&(i=r.imageUrl)}),i==""&&(i="https://ssl.nexon.com/s2/p3/etc/gameimg_default_155.png"),i}function getGameStoreUrl(n,t){var i="";return n&&n.length>0&&$.each(n,function(n,r){r&&r.store==t&&(i=r.storeUrl)}),i}function goIconLink(n,t,i,r){i==="_self"?window.location.href=t:window.open(t);sendClick2Log(n);r.stopPropagation&&r.stopPropagation()}function sendClick2Log(n){$h.a2s.sendClickLog($(n).attr("obj"),$(n).attr("opt"))}function closeCacheCharge(){window.location.reload()}function showNotificationLayer(){var n,t;$(".layerAlertPush")&&$(".layerAlertPush").remove();n=$("<div>").addClass("layerAlertPush");t=$("<p>").html("브라우저 알림을 설정하고<br>넥슨 게임의 주요 소식과 이벤트를 빠르게 받아보세요.");HomeHelper.isEdge()&&t.append("<br><span>(브라우저에서 알림이 차단된 경우 주소창 우측에서 알림을 허용해주세요.)<\/span>");var r=$("<a>").attr("href","#").text("아니요").click(function(){hideNotificationLayer("no")}),u=$("<a>").attr("href","#").text("네").click(requestNotificationPermission),i=$("<a>").attr("href","#").addClass("btClose").click(function(){hideNotificationLayer("close")}),f=$("<span>").addClass("acchidden").text("레이어 닫기");i.append(f);n.append(t,r," ",u,i);$("#wrapper").after(n);$h.a2s.sendContentsLog("P_MAIN",'{"Name":"Webpush_banner","Value":""}')}function hideNotificationLayer(n){$h.a2s.sendClickLog("P_MAIN",'{"Name":"Webpush_banner","Value":"'+n+'"}');$(".layerAlertPush").hide()}function urlB64ToUint8Array(n){var r="=".repeat((4-n.length%4)%4),u=(n+r).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(u),i=new Uint8Array(t.length);for(let n=0;n<t.length;++n)i[n]=t.charCodeAt(n);return i}function readyNotificationPermission(){swRegistration.active&&Notification&&NgbMember.IsLogin()&&($h.a2s.sendContentsLog("webpush-subscription",'{"webpush-current-status": "'+Notification.permission+'"}'),Notification.permission!=="granted"&&window.Home.Components.Storage.fetchData("notificationBannerData"))}function requestNotificationPermission(){hideNotificationLayer("yes");Notification.requestPermission(function(n){Notification.permission!==n&&(Notification.permission=n);Notification.permission==="granted"?swRegistration.pushManager.getSubscription().then(function(n){if(n)$h.a2s.sendContentsLog("webpush-subscription",JSON.stringify(n));else{var t=urlB64ToUint8Array(applicationServerPublicKey);swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then(function(n){$h.a2s.sendContentsLog("webpush-subscription",JSON.stringify(n))}).catch(function(n){console.log("Failed to subscribe the user: ",n)})}window.Home.Components.Storage.fetchData("notificationData")}):$h.a2s.sendContentsLog("webpush-subscription",'{"webpush-current-status": "denied"}')})}var applicationServerPublicKey,swRegistration;(function(n,t){this[n]=t()})("HomeHelper",function(){var n={};return n.getMemberSN=function(){var r=0,t=$OASIS.Cookie.get("NXCH"),n,i;if(t)for(n=0;n<t.split("&").length;n++)i=t.split("&")[n],i.indexOf("OID")>-1&&(r=i.split("=")[1]);return r},n.isEdge=function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("chrome")!==-1&&n.indexOf("edg")!==-1?!0:!1},n}),function(n,t){this[n]=t()}("Home",function(){var n={};return n.domain={oasisapi:$("#contents").data("oasisurl"),myapi:$("#contents").data("myapiurl"),webpushapi:"https://webpush-api.cem.nexon.com"},n}),function(n,t,i){n[t]=i}(window.Home,"init",function(){var n=window.Home,t;n.Components={};t=n.Components;t.Storage=function(){function i(n,i){var u=t[n].subscribers,r,f;for(t[n].data=i,r=0,f=u.length;r<f;r++)u[r](i)}var t={mainData:{data:{gameList:[],genreList:[],hashTagList:[]},fetchData:function(t){var i=$OASIS.SessionStorage.get("mainData",!0);i?t("mainData",i):$.ajax({url:n.domain.oasisapi+"/game/mainlist",type:"GET",dataType:"json",timeout:1e4}).done(function(n){$OASIS.SessionStorage.set("mainData",n,!0,10);t("mainData",n)}).fail(function(n){console.error(n);t("mainData",null)})},subscribers:[]},newGameData:{data:{appSNList:[]},fetchData:function(t){var i=$OASIS.SessionStorage.get("newGameListN",!0);i?t("newGameData",i):$.ajax({url:n.domain.oasisapi+"/game/newgamelist",type:"GET",dataType:"json",timeout:1e4}).done(function(n){$OASIS.SessionStorage.set("newGameListN",n,!0,10);t("newGameData",n)})},subscribers:[]},noticeData:{data:{noticeList:[]},fetchData:function(t){var i=$OASIS.SessionStorage.get("noticeData",!0);i?t("noticeData",i):$.ajax({url:n.domain.oasisapi+"/notice/noticelist",type:"GET",dataType:"json"}).done(function(n){$OASIS.SessionStorage.set("noticeData",n,!0,10);t("noticeData",n)})},subscribers:[]},notificationBannerData:{data:{result:!1,message:""},fetchData:function(t){$.ajax({url:n.domain.webpushapi+"/subscription",data:{nexonsn:HomeHelper.getMemberSN(),pcid:$OASIS.Cookie.get("PCID"),user_agent:encodeURIComponent(window.navigator.userAgent),domain:window.location.host},type:"GET",dataType:"json"}).done(function(n){t("notificationBannerData",n)}).fail(function(n){console.error(n)})},subscribers:[]},notificationData:{data:{result:!1},fetchData:function(t){$.ajax({url:n.domain.webpushapi+"/subscription",data:{nexonsn:HomeHelper.getMemberSN(),pcid:$OASIS.Cookie.get("PCID"),user_agent:encodeURIComponent(window.navigator.userAgent),domain:window.location.host},type:"POST",dataType:"json"}).done(function(n){t("notificationData",n)}).fail(function(n){console.error(n)})},subscribers:[]}};return t.addSubscriber=function(n){t[n.label].subscribers.push(n.callback)},t.fetchData=function(n){t[n].fetchData(i)},t.getData=function(n){var i=t[n];return i?i.data:null},t}()});$(function(){myapi=$("#contents").data("myapiurl");nccUrl=$("#contents").data("nccurl")});window.onmessage=function(n){if(n&&n.data){var t=n.data;t.type&&t.type=="ncc-player-height"&&resizeNCCViewLayer(null,t.payload);t.type&&t.type=="ncc-player-width"&&resizeNCCViewLayer(t.payload,null);t=="closeNCCViewLayer"&&closeNCCViewLayer()}};var userAgent=window.navigator.userAgent,ieReg=/msie|Trident.*rv[ :]*11\./gi,ie=ieReg.test(userAgent),ncc_index=0;String.prototype.includes||Object.defineProperty(String.prototype,"includes",{enumerable:!1,writable:!0,value:function(n,t){"use strict";return typeof t!="number"&&(t=0),t+n.length>this.length?!1:this.indexOf(n,t)!==-1}});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,writable:!0,value:function(n){"use strict";var f=Object(this),u=parseInt(f.length)||0,i,t,r;if(u===0)return!1;for(i=parseInt(arguments[1])||0,i>=0?t=i:(t=u+i,t<0&&(t=0));t<u;){if(r=f[t],n===r||n!==n&&r!==r)return!0;t++}return!1}});mainData=null;gameData=[];genreData=[];recommendData={MyGameInfo:{MemberSN:0,MyGameType:1},MyGames:[{GameCode:589824,RecommendDetail:"당신을 위한 추천게임",FeatureID:0},{GameCode:74257,RecommendDetail:"당신을 위한 추천게임",FeatureID:0},{GameCode:106566,RecommendDetail:"당신을 위한 추천게임",FeatureID:0},{GameCode:73985,RecommendDetail:"당신을 위한 추천게임",FeatureID:0}]};oasisapi=$("#contents").data("oasisurl");myapi=$("#contents").data("myapiurl");resourceurl=$(".recommendGame ul").data("resourceurl");mverseapi=$("#contents").data("mverseapiurl");mverseurl=$("#contents").data("mverseurl");var myGameSetting=function(){$("#myGameSetting")[0].checked?($(".myGame").addClass("stateDirectly"),$(".btSec .btCancel").attr("opt",'{"Name":"MyGame_Customizing","Type":"CustomizingCancel"}'),$(".btSec .btSubmit").attr("opt",'{"Name":"MyGame_Customizing","Type":"CustomizingConfirm"}')):($(".myGame").removeClass("stateDirectly"),$(".btSec .btCancel").attr("opt",'{"Name":"MyGame_Customizing","Type":"AutoCancel"}'),$(".btSec .btSubmit").attr("opt",'{"Name":"MyGame_Customizing","Type":"AutoConfirm"}'))},setMyGameReset=function(){$(".allGameList input[type=checkbox]").prop("checked",!1);$("#myGameCodeList").val("");drawMyGameIconList()},chkMyGame=function(n){$.each(n,function(n,t){$.each($(".allGameList input[type=checkbox]"),function(n,i){$(i).val()==t&&$(i).prop("checked",!0)})});drawMyGameIconList()},drawMyGameIconList=function(){var n=[],t,i;for(n=$("#myGameCodeList").val().split(","),$(".directlySetting .myGameList li").remove(),$("#myGameCodeList").val().length>0&&$.each(n,function(n,t){var i=$(".directlySetting .myGameList ul"),r=$('<li><span class="gameImg"><img src="'+getIconByGameCode(t)+'" width="60" height="60" alt=""><\/span><\/li>');i.append(r)});$(".directlySetting .myGameList li").length<3;)t=$(".directlySetting .myGameList ul"),i=$('<li><span class="none"><\/span><\/li>'),t.append(i)},setMyGame=function(){if($("#myGameSetting")[0].checked&&$(".allGameList input[type=checkbox]:checked").length==0)$(".myGameAlert").html("<p>게임을 1개 이상 선택해주세요.<\/p>").fadeIn(300).delay(1e3).fadeOut(300);else{var n=1,t=[];$("#myGameSetting")[0].checked?(n=2,$.each($("#myGameCodeList").val().split(","),function(n,i){t.push(i)})):$("#myGameCodeList").val("");$.ajax({url:myapi+"/MyGame/MyGameInfo?st=sso",dataType:"json",type:"POST",data:"MyGameType="+n+"&ChangeReason=2&strMyGames="+JSON.stringify(t),contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!1,xhrFields:{withCredentials:!0}}).done(function(n){$OASIS.SessionStorage.remove("recommendGame_"+n.moreinfo);$OASIS.SessionStorage.remove("GNB_MyGame_"+n.moreinfo);$OASIS.SessionStorage.remove("myNotice_"+n.moreinfo);$(".recommendGame").removeClass("mswMyGameMax");callMyGame(mainData,n.moreinfo);$(".myGameAlert").html("<p>적용 되었습니다.<\/p>").fadeIn(300).delay(1e3).fadeOut(300);setTimeout(function(){$(".myGame").removeClass("myGameShow");$("body").removeClass("scrollHide")},1e3)}).fail(function(n){console.log(n)})}},drawMyGameAutoSetting=function(n,t){var r=$(".autoSetting ul"),i=$("<li><\/li>"),u=$('<span class="gameImg"><img src="'+getGameImage(t.extendGameInfo.gameImageList,"fileGnbDirect")+'" width="60" height="60" alt=""><\/span><span class="gameName">'+t.basicGameInfo.gameName.replace("|br|","")+'<\/span><span class="date">'+n.lastConnectionDateTime+"<\/span>");i.append(u);r.append(i)},drawMyGameManualSetting=function(n,t){var i=$(".allGameList");$(".allGameList h3").remove();$(".allGameList ul").remove();$.each(t,function(t,r){var f=$("<h3>"+r.genreName+"<\/h3>"),u;i.append(f);u=$("<ul><\/ul>");$.each(n,function(n,t){if(t.basicGameInfo.genreSN.includes(r.genreSN)){var i=$('<li><input type="checkbox" id="myGame_'+t.basicGameInfo.gameCode+'" value="'+t.basicGameInfo.gameCode+'"><label for="myGame_'+t.basicGameInfo.gameCode+'"><span class="gameImg"><img src="'+getGameImage(t.extendGameInfo.gameImageList,"fileGnbDirect")+'" width="28" height="28" alt=""><\/span>'+t.basicGameInfo.gameName.replace("|br|","")+"<\/label><\/li>");u.append(i)}});i.append(u)});$(".allGameList input[type=checkbox]").on("change",function(){var n,t;$(".allGameList input[type=checkbox]:checked").length<=3?(n=[],$("#myGameCodeList").val().length>0&&(n=$("#myGameCodeList").val().split(",")),$(this).prop("checked")?n.push($(this).val()):(t=n.indexOf($(this).val()),n.splice(t,1)),$("#myGameCodeList").val(n),drawMyGameIconList()):($(this).prop("checked",!1),$(".myGameAlert").html("<p>최대 3개까지 선택 가능합니다.<\/p>").fadeIn(300).delay(1e3).fadeOut(300))})},initMyGameSettingExec=function(n,t,i){$(".autoSetting ul > li").remove();i.length>0?($.each(i,function(n,i){$.each(t,function(n,t){t.gameCode==i.gameCode&&drawMyGameAutoSetting(i,t)})}),$(".autoSetting ul").show(),$(".autoSetting .none").remove()):($(".autoSetting ul").hide(),$(".autoSetting .none").show());n.MyGameInfo.MyGameType==0||n.MyGameInfo.MyGameType==1?($("#myGameSetting")[0].checked=!1,$("#myGameCodeList").val("")):$("#myGameSetting")[0].checked=!0;drawMyGameIconList();myGameSetting()},initMyGameSetting=function(n,t){var i=$OASIS.SessionStorage.get("myRecentGame_"+n.MyGameInfo.MemberSN,!0);i!=null?initMyGameSettingExec(n,t,i.recentList):$.ajax({url:myapi+"/Live/getRecentGameList?st=sso",dataType:"json",type:"GET",xhrFields:{withCredentials:!0}}).done(function(i){$OASIS.SessionStorage.set("myRecentGame_"+n.MyGameInfo.MemberSN,i,!0,60);initMyGameSettingExec(n,t,i.recentList)}).fail(function(){})},drawLiveGameCard=function(n,t){var o=$(".recommendGame ul"),u,e,f,h,i,r;if(n.FeatureID>-2){u="";u=NgbMember.IsLogin()?n.FeatureID==-1||n.FeatureID==2018?"MyGame":"Recommendation_Login":"Recommendation_Logout";i=$("<li><\/li>");e="_self";t.extendGameInfo.gameWebUrl.hasOwnProperty("pcSiteOpenType")&&t.extendGameInfo.gameWebUrl.pcSiteOpenType===2&&(e="_blank");r=$('<a href="'+t.extendGameInfo.gameWebUrl.pcSiteUrl+'" target="'+e+'" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"'+u+'","Value":"'+n.FeatureID+'","GameCode":"'+n.GameCode+"\"}'><\/a>");f=$('<span class="gameCate"><\/span>');n.FeatureID==2018||n.FeatureID==-1?f.append('<span class="my">my<\/span>'):f.append('<span class="recommend">추천<\/span>');var c=$('<span class="gameImg"><img src="'+getGameImage(t.extendGameInfo.gameImageList,"fileRecommendImg")+'" width="153" height="192" alt=""><\/span>'),l=$('<span class="gameName">'+t.basicGameInfo.gameName.replace("|br|","<br/>")+"<\/span>"),s=$('<span class="gameCheck"><\/span>');t.extendGameInfo.inspection.isChecking&&t.basicGameInfo.state===1&&s.append('<span>점검중 <span class="iconDesktop"><\/span><\/span> '+t.extendGameInfo.inspection.inspectDescription);n.RecommendDetail.includes("#장르명#")&&(n.RecommendDetail=n.RecommendDetail.replace("#장르명#",getGenreName(t.basicGameInfo.genreSN[0])));h=$('<span class="gameReason">'+n.RecommendDetail+"<\/span>");r.append(c).append(f).append(l).append(s).append(h);i.append(r);o.append(i);$h.a2s.sendContentsLog("P_MAIN",'{"Name":"Personalization","Type":"'+u+'","Value":"'+n.FeatureID+'","GameCode":"'+n.GameCode+'"}')}else i=$('<li class="none"><\/li>'),r=$('<a href="#" class="btMyGameSetting" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"MyGame_Settings"}\'> <span class="tit">MY게임 설정하기<\/span> <span class="cnts">설정 한번으로 원하는 <br>게임을 빠르게 이동할 수 <br>있습니다.<\/span><\/a>'),i.append(r),o.prepend(i)},drawMswCard=function(n){var t=!1,e=NgbMember.IsLogin()?"Msw_Login":"Msw_Logout",o=n.url||mverseurl+"/play/"+n.gameId,s=$(".recommendGame ul"),i=$('<li class="msw"><\/li>'),r=$('<a href="'+o+'" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"'+e+'","Value":"'+n.gameId+"\"}'><\/a>"),h=$('<span class="gameImg"><img src="'+n.imageUrl+'" width="153" height="192" alt=""><\/img><\/span>'),u=$('<span class="gameCate"><\/span>'),f=$('<span class="gameName"><\/span>'),c=$('<span class="gameReason"><span class="icon"><\/span>메이플스토리 월드<\/span>');return u.append('<span class="pick">Pick<\/span>'),$.ajax({url:mverseapi+"/game/v1/mod/make/"+n.gameId,dataType:"json",async:!1,timeout:5e3,type:"GET",xhrFields:{withCredentials:!0}}).done(function(n){f.text(n.data.name);r.append(h).append(u).append(f).append(c);i.append(r);s.append(i);t=!0}).fail(function(){t=!1}),t},recommendGameExecute=function(n,t){var o=!0,r=[],s=[],i=0,u,f,e;if($(".recommendGame ul").empty(),u=!1,f=0,$.ajax({url:mverseapi+"/game/v1/mod/banners?language=ko&playPlatforms=1&type=NEXON_HOME",dataType:"json",async:!1,timeout:5e3,type:"GET",xhrFields:{withCredentials:!0}}).done(function(n){var t=n.data,r;n.code==0&&Array.isArray(t)&&t.length>0&&t[0].imageUrl&&(r=drawMswCard(t[0]),r&&(u=!0,i++))}).fail(function(){}),$.each(n.MyGames,function(n,u){((u.FeatureID==-1||u.FeatureID==2018)&&(s.push(u.GameCode),f++),u.FeatureID==-1&&r.push(u.GameCode),i>3)||(u.FeatureID==-2?(o=!1,drawLiveGameCard(u,null),i++):$.each(t,function(n,t){t.gameCode==u.GameCode&&(drawLiveGameCard(u,t),i++)}))}),!NgbMember.IsLogin()&&i==4){var c=$(".recommendGame ul"),h=$('<li class="banner"><\/li>'),l=$('<a href="https://nexon.link/8ss" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"CardBanner"}\'><img src="'+resourceurl+'/home/images/temp/banner_recommend_plcc2.jpg" width="153" height="342" alt=""><\/a>');h.append(l);c.append(h)}if(u&&f===3&&$(".recommendGame").addClass("mswMyGameMax"),initMyGameSetting(n,t),drawMyGameManualSetting(t,genreData),n.MyGameInfo.MyGameType==2&&($("#myGameCodeList").val(r),chkMyGame(r)),NgbMember.IsLogin()&&o&&n.MyGameInfo.MyGameType==0&&$OASIS.Cookie.get("MG_TP")==""){$("#myGameTooltip").addClass("tooltipOpen");$("#myGameTooltip .btClose").on("click",function(){$OASIS.Cookie.set("MG_TP","1",365)})}NgbMember.IsLogin()&&(e=$OASIS.SessionStorage.get("myNotice_"+n.MyGameInfo.MemberSN,!0),e!=null?myNoticeExecute(e,n.MyGames):$.ajax({url:oasisapi+"/Notice/mynoticelist",data:"mygames="+JSON.stringify(s),dataType:"json",type:"GET",xhrFields:{withCredentials:!0}}).done(function(t){$OASIS.SessionStorage.set("myNotice_"+n.MyGameInfo.MemberSN,t,!0,60);myNoticeExecute(t,n.MyGames)}).fail(function(){var n=$('<div class="none"><p>MY게임 설정하고<br>내 게임의 최신 소식을 빠르게 확인해보세요.<\/p><div><button type="button" class="btMyGameSetting" onclick="myGameSetBtn();sendClick2Log(this);document.location.href=\''+document.location.protocol+"//"+document.location.host+document.location.pathname+'#allGame\'" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"MyGame_Settings"}\'>MY게임 설정<\/button><button type="button"  onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"News_GameFind"}\'>게임 찾기<\/button><\/div><\/div>');$(".newsCnts .swiper-wrapper").hide();$("#news .swiper-button-prev").hide();$("#news .swiper-button-next").hide();$("#news").append(n);$(".logged .tab li").on("click",function(n){n.preventDefault();var t=$(".logged");$(this).hasClass("tabInfo")?t.removeClass("stateNews").addClass("stateInfo"):t.removeClass("stateInfo").addClass("stateNews")});$(".logged").removeClass("stateNews").addClass("stateInfo")}));$(".btMyGameSetting").on("click",function(n){n.preventDefault();myGameSetBtn()})},homeBannerExecute=function(n){n.homeList.length>0&&(homebanner=[],NgbMember.IsLogin()?(tempbanner=[],$.each(recommendData.MyGames.slice(0,4),function(t,i){$.each(n.homeList,function(n,t){i.GameCode==t.gameCode&&homebanner.filter(function(n){return n.bannerSN==t.bannerSN}).length==0&&(t.recommendType=i.FeatureID==-1||i.FeatureID==2018?1:2,homebanner.push(t))})}),$.each(n.homeList,function(n,t){homebanner.filter(function(n){return n.bannerSN==t.bannerSN}).length==0&&homebanner.push(t)})):homebanner=n.homeList,promotionBannerList.item=homebanner);promotionBannerLayout.callChangeLayout()},myGameSetBtn=function(){return $(".myGame").addClass("myGameShow"),$("body").addClass("scrollHide"),myGameSetting(),!1},homeBannerCall=function(){$.ajax({url:oasisapi+"/Promotion/homebannerlist",dataType:"json",type:"GET",xhrFields:{withCredentials:!0}}).done(function(n){homeBannerExecute(n)}).fail(function(){promotionBannerLayout.callChangeLayout()})},getGenreName=function(n){var t="";return $.each(genreData,function(i,r){r.genreSN==n&&(t=r.genreName)}),t},mainDataExecute=function(n,t){if(mainData=n,n.gameList.length>0){gameData=n.gameList;genreData=n.genreList;var i=$OASIS.SessionStorage.get("recommendGame",!0);NgbMember.IsLogin()?($(".myInfo").addClass("statelogin"),i=$OASIS.SessionStorage.get("recommendGame_"+t,!0),i!=null?(recommendData=i,recommendGameExecute(i,gameData,genreData),homeBannerCall()):$.ajax({url:myapi+"/MyGame/MyGameList?st=sso",dataType:"json",type:"GET",xhrFields:{withCredentials:!0}}).done(function(n){recommendData=n;$OASIS.SessionStorage.set("recommendGame_"+t,recommendData,!0,60);$OASIS.SessionStorage.set("GNB_MyGame_"+t,recommendData,!0,60)}).fail(function(){}).always(function(){recommendGameExecute(recommendData,gameData,genreData);try{window.Gnb.Components.Storage.fetchData("myGame")}catch(n){}homeBannerCall()})):($(".myInfo .title h2").text("추천게임"),$(".myInfo .login").show(),$(".myInfo .logged").hide(),i!=null?(recommendData=i,recommendGameExecute(i,gameData,genreData),homeBannerCall()):$.ajax({url:myapi+"/MyGame/MyGameList?st=sso",dataType:"json",type:"GET",xhrFields:{withCredentials:!0}}).done(function(n){recommendData=n;$OASIS.SessionStorage.set("recommendGame",recommendData,!0,60)}).fail(function(){}).always(function(){recommendGameExecute(recommendData,gameData,genreData);homeBannerCall()}))}},myNoticeExecute=function(n,t){try{newsSwiper.destroy()}catch(r){}if($(".newsCnts .swiper-wrapper div").remove(),$(".news .none").remove(),n.myNoticeList.length>0){$.each(n.myNoticeList,function(n,t){var u=$('<div class="swiper-slide" data-gamecode="'+t.gameCode+'"><\/div>'),i=$('<a href="'+t.linkUrl+'"><\/a>'),f=$('<span class="cate">'+t.noticeCate.replace("[","").replace("]","")+"<\/span>"),e=$('<span class="date">'+t.dateText+"<\/span>"),r=$('<span class="cnts"><\/span>'),o=$('<span class="gameImg"><img src="'+t.gameImgUrl+'" width="26" height="26" alt="'+t.gameName.replace("|br|","")+'"><\/span>'),s=$('<span class="gameName"><span>'+(t.noticeType==1?t.gameName.replace("|br|","<br/>"):t.gameName.replace("|br|",""))+"<\/span><\/span>"),h;t.noticeType==1?(u.addClass("slideTxt"),r.text(t.noticeContent.eventTitle),i.attr("obj","P_MAIN").attr("opt",'{"Name":"Personalization","Type":"News_Notice","GameCode":"'+t.gameCode+'","Value":"'+t.noticeCate.replace("[","").replace("]","")+'"}'),i.append(f).append(e).append(r).append(o).append(s),i.bind("click",function(){$h.a2s.sendClickLog("P_MAIN",'{"Name":"Personalization","Type":"News_Notice","GameCode":"'+t.gameCode+'","Value":"'+t.noticeCate.replace("[","").replace("]","")+'"}')})):t.noticeType==2&&(u.addClass("slideImg"),r.append('<span class="eventTit">'+t.noticeContent.eventTitle+"<\/span>"),r.append('<span class="eventCnts">'+t.noticeContent.eventContents+"<\/span>"),h=$('<span class="eventImg"><img src="'+t.eventImgUrl+'" width="315" alt=""><\/span>'),i.attr("obj","P_MAIN").attr("opt",'{"Name":"Personalization","Type":"News_Event","GameCode":"'+t.gameCode+'"}'),i.append(f).append(e).append(r).append(h).append(o).append(s),i.bind("click",function(){$h.a2s.sendClickLog("P_MAIN",'{"Name":"Personalization","Type":"News_Event","GameCode":"'+t.gameCode+'"}')}));u.append(i);$(".newsCnts .swiper-wrapper").append(u);$(".newsCnts .swiper-wrapper").show();$("#news .swiper-button-prev").show();$("#news .swiper-button-next").show();$("#news").removeClass("newsNone")});newsSwiper=new Swiper(".newsCnts",{slidesPerView:"auto",slidesOffsetBefore:44,slidesOffsetAfter:44,mousewheel:!0,allowTouchMove:!1,navigation:{nextEl:".news .swiper-button-next",prevEl:".news .swiper-button-prev"},breakpoints:{1412:{slidesOffsetBefore:34,slidesOffsetAfter:34}}});newsSwiper.update();$(".news .swiper-button-next").on("click",function(){$h.a2s.sendClickLog("P_MAIN",'{"Name":"Personalization","Type":"News_Next"}')});$(".news .swiper-button-prev").on("click",function(){$h.a2s.sendClickLog("P_MAIN",'{"Name":"Personalization","Type":"News_Prev"}')});$(".logged .tab li").on("click",function(n){n.preventDefault();var t=$(".logged");$(this).hasClass("tabInfo")?t.removeClass("stateNews").addClass("stateInfo"):t.removeClass("stateInfo").addClass("stateNews");newsSwiper.update()})}else{var i=$('<div class="none setting"><p>MY게임 설정하고<br>내 게임의 최신 소식을 빠르게 확인해보세요.<\/p><div><button type="button" class="btMyGameSetting" onclick="myGameSetBtn();sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"News_GameSettings"}\'>MY게임 설정<\/button><button type="button"  onclick="sendClick2Log(this);document.location.href=\''+document.location.protocol+"//"+document.location.host+document.location.pathname+'#allGame\'" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"News_GameFind"}\'>게임 찾기<\/button><\/div><\/div>');$.each(t,function(n,t){(t.FeatureID==-1||t.FeatureID==2018)&&(i=$('<div class="none"><p>MY게임 소식이 없습니다.<\/p><\/div>'))});$("#news").addClass("newsNone");$(".newsCnts .swiper-wrapper").hide();$("#news .swiper-button-prev").hide();$("#news .swiper-button-next").hide();$("#news").append(i);$(".logged .tab li").on("click",function(n){n.preventDefault();var t=$(".logged");$(this).hasClass("tabInfo")?t.removeClass("stateNews").addClass("stateInfo"):t.removeClass("stateInfo").addClass("stateNews")});$(".logged").removeClass("stateNews").addClass("stateInfo")}$(".myInfo .logged").show();$(".myInfo .login").hide()},callMyGame=function(n,t){mainDataExecute(n,t)};$(function(){$(".myGame .btSec .btClose, .myGame .btSec .btCancel").on("click",function(){$(".myGame").removeClass("myGameShow");$("body").removeClass("scrollHide");var n=[];return $.each(recommendData.MyGames,function(t,i){i.FeatureID==-1&&n.push(i.GameCode)}),initMyGameSetting(recommendData,mainData.gameList),drawMyGameManualSetting(mainData.gameList,mainData.genreList),recommendData.MyGameInfo.MyGameType==2&&($("#myGameCodeList").val(n),chkMyGame(n)),drawMyGameIconList(),!1});$("#myGameSetting").on("change",function(){myGameSetting();$("#myGameSetting")[0].checked?($("#myGameSetting").attr("opt",'{"Name":"MyGame_Customizing","Type":"CustomizingTab"}'),$h.a2s.sendClickLog("P_MAIN",'{"Name":"MyGame_Customizing","Type":"CustomizingTab"}')):($("#myGameSetting").attr("opt",'{"Name":"MyGame_Customizing","Type":"AutoTab"}'),$h.a2s.sendClickLog("P_MAIN",'{"Name":"MyGame_Customizing","Type":"AutoTab"}'))})});String.prototype.includes||Object.defineProperty(String.prototype,"includes",{enumerable:!1,writable:!0,value:function(n,t){"use strict";return typeof t!="number"&&(t=0),t+n.length>this.length?!1:this.indexOf(n,t)!==-1}});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,writable:!0,value:function(n){"use strict";var f=Object(this),u=parseInt(f.length)||0,i,t,r;if(u===0)return!1;for(i=parseInt(arguments[1])||0,i>=0?t=i:(t=u+i,t<0&&(t=0));t<u;){if(r=f[t],n===r||n!==n&&r!==r)return!0;t++}return!1}});var promotionBannerList={item:[{bannerSN:0,type:"default",gamename:"넥슨플레이",eventname:"넥슨플레이 소개",link:"http://nexonplay.nexon.com/index.aspx",bg:"https://rs.nxfs.nexon.com/home/images/main/homebanner_image_nxplay.png",bgcolor:"#6d40f7"},{bannerSN:0,type:"default",gamename:"넥슨 OTP",eventname:"넥슨 OTP 소개",link:"https://security.nexon.com/playpass/index.aspx",bg:"https://rs.nxfs.nexon.com/home/images/main/homebanner_image_otp.png",bgcolor:"#132b97"}]},bannerA2S=[],video_ids=[],player=[],mouseIN=!1,video_playing=!1,st=null,promotionBannerLayout=function(){var n=promotionBannerList.item,r=n.length,t=0,i=5,f=function(t){var i="",r;switch(n[t].type){case"default":i+="<div class='swiper-slide slideDefault' data-bannerID='"+n[t].bannerSN+"' data-bannerType='Image'><a href='"+n[t].link+'\' target=\'_blank\' onclick=\'sendClick2Log(this);\' obj=\'P_MAIN\' opt=\'{"Name":"HomeBanner","Type":"Image","Value":"'+n[t].bannerSN+"\"}'>";i+="<div class='itemBg swiper-lazy' style='background-color:"+n[t].bgcolor+"' data-background='"+n[t].bg+"'><\/div>";i+="<span class='acchidden'>"+n[t].gamename.replace("|br|","")+" "+n[t].eventname+"<\/span>";i+="<\/a><\/div>";break;case"parallax":i+="<div class='swiper-slide slideParallax' data-bannerID='"+n[t].bannerSN+"' data-bannerType='Parallax'><a href='"+n[t].link+'\' target=\'_blank\' onclick=\'sendClick2Log(this);\' obj=\'P_MAIN\' opt=\'{"Name":"HomeBanner","Type":"Parallax","Value":"'+n[t].bannerSN+"\"}'>";i+="<div class='itemBg swiper-lazy' style='background-color:"+n[t].bgcolor+"' data-background='"+n[t].bg+"'><\/div>";i+="<span class='acchidden'>"+n[t].gamename.replace("|br|","")+" "+n[t].eventname+"<\/span>";i+="<div class='itemCharacter'><div class='itemDeco swiper-lazy' data-background='"+n[t].character+"'><\/div><\/div>";i+="<div class='itemText'><div class='itemDeco swiper-lazy' data-background='"+n[t].text+"'><\/div><\/div>";i+="<\/a><\/div>";break;case"video":r=n[t].video.replace("https://www.youtube.com/embed/","").replace("https://youtu.be/","");i+="<div class='swiper-slide slideVideo' data-bannerID='"+n[t].bannerSN+"' data-bannerType='Video'><a href='"+n[t].link+'\' target=\'_blank\' onclick=\'sendClick2Log(this);\' obj=\'P_MAIN\' opt=\'{"Name":"HomeBanner","Type":"Video","Value":"'+n[t].bannerSN+"\"}'>";i+="<div class='itemBg swiper-lazy' style='background-color:"+n[t].bgcolor+"' data-background='"+n[t].bg+"'><\/div>";i+="<span class='acchidden'>"+n[t].gamename.replace("|br|","")+" "+n[t].eventname+"<\/span>";i+="<div class='itemText'><div class='itemDeco swiper-lazy' data-background='"+n[t].text+"'><\/div><\/div><\/a>";i+="<div class='itemVideo'><div class='itemDeco' id='ytPlayer_"+r+"'><iframe src='https://www.youtube.com/embed/"+r+"' frameborder='0' allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture' allowfullscreen><\/iframe><\/div><\/div><\/div>";video_ids.push(r)}return i},e=function(t){var i="",r;switch(n[t].type){case"default":i+="<div class='swiper-slide slideDefault'><a href='"+n[t].link+"' target='_blank'>";i+="<div class='itemBg swiper-lazy' style='background-color:"+n[t].bgcolor+"' data-background='"+n[t].bg+"'><\/div>";i+="<span class='acchidden'>"+n[t].gamename+" "+n[t].eventname+"<\/span>";i+="<\/a><\/div>";break;case"parallax":i+="<div class='swiper-slide slideParallax'><a href='"+n[t].link+"' target='_blank'>";i+="<div class='itemBg swiper-lazy' style='background-color:"+n[t].bgcolor+"' data-background='"+n[t].bg+"'><\/div>";i+="<span class='acchidden'>"+n[t].gamename+" "+n[t].eventname+"<\/span>";i+="<div class='itemCharacter'><div class='itemDeco swiper-lazy' style='background-image:url("+n[t].character+")'><\/div><\/div>";i+="<div class='itemText'><div class='itemDeco swiper-lazy' style='background-image:url("+n[t].text+")'><\/div><\/div>";i+="<\/a><\/div>";break;case"video":r=n[t].video.replace("https://www.youtube.com/embed/","").replace("https://youtu.be/","");i+="<div class='swiper-slide slideVideo'><a href='"+n[t].link+"' target='_blank'>";i+="<div class='itemBg swiper-lazy' style='background-color:"+n[t].bgcolor+"' data-background='"+n[t].bg+"'><\/div>";i+="<span class='acchidden'>"+n[t].gamename+" "+n[t].eventname+"<\/span>";i+="<div class='itemText'><div class='itemDeco swiper-lazy' style='background-image:url("+n[t].text+")'><\/div><\/div><\/a>";i+="<div class='itemVideo'><div class='itemDeco'><iframe src='https://www.youtube.com/embed/"+r+"' frameborder='0' allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture' allowfullscreen><\/iframe><\/div><\/div><\/div>"}return i},o=function(){var u,o,a;n=promotionBannerList.item;r=n.length;u="";for(o in n)u+=f(o);document.getElementById("promotionBannerCnts").innerHTML=u;r>0&&(bannerA2S.push($($("#promotionBannerCnts")[0].children[0]).data("bannerid")),$h.a2s.sendContentsLog("P_MAIN",'{"Name":"HomeBanner","Type":"'+$($("#promotionBannerCnts")[0].children[0]).data("bannertype")+'","Value":"'+$($("#promotionBannerCnts")[0].children[0]).data("bannerid")+'"}'));var c=function(){t=t-i;t<0&&(t=0);e()},s=function(){var n;t=t+i;n=r-i;t>n&&(t=r-i);e()},l=function(){var n=t,r=t+i;(n>promotionBannerCnts.activeIndex||r<=promotionBannerCnts.activeIndex)&&(t=(parseInt(promotionBannerCnts.activeIndex/i)-1)*i,s())},h=function(){t==0?$(".promotionNavigation .swiper-button-prev").addClass("swiper-button-disabled"):$(".promotionNavigation .swiper-button-prev").removeClass("swiper-button-disabled");t==r-i||r<=i?$(".promotionNavigation .swiper-button-next").addClass("swiper-button-disabled"):$(".promotionNavigation .swiper-button-next").removeClass("swiper-button-disabled")},e=function(){if(r>=i){var n=promotionBannerCnts.pagination.bullets[t].offsetLeft;$(".promotionBannerPaginationWrapper").css("transform","translate3d(-"+n+"px, 0, 0)");h()}};promotionBannerCnts=new Swiper(".promotionBannerCnts",{effect:"fade",allowTouchMove:!1,autoHeight:!0,preventClicks:!1,preloadImages:!1,lazy:!0,fadeEffect:{crossFade:!0},autoplay:{delay:5e3},pagination:{el:".promotionBannerPaginationWrapper",clickable:!0,renderBullet:function(t,i){if(n.length>0)return n[t].recommendType!=undefined&&n[t].recommendType==1?"<div class='"+i+"'><span class='gameCate my'>MY<\/span><div class='gamename'>"+n[t].gamename.replace("|br|","")+"<\/div><div class='eventname'>"+n[t].eventname+"<\/div><div class='progressbar'><\/div><\/div>":n[t].recommendType!=undefined&&n[t].recommendType==2?"<div class='"+i+"'><span class='gameCate recommend'>추천<\/span><div class='gamename'>"+n[t].gamename.replace("|br|","")+"<\/div><div class='eventname'>"+n[t].eventname+"<\/div><div class='progressbar'><\/div><\/div>":"<div class='"+i+"'><div class='gamename'>"+n[t].gamename.replace("|br|","")+"<\/div><div class='eventname'>"+n[t].eventname+"<\/div><div class='progressbar'><\/div><\/div>"}},on:{init:function(){h()},resize:function(){e()},slideChange:function(){var n=$($("#promotionBannerCnts")[0].children[promotionBannerCnts.activeIndex]);promotionBannerCnts.autoplay.running?(l(),bannerA2S.includes(n.data("bannerid"))||(bannerA2S.push(n.data("bannerid")),$h.a2s.sendContentsLog("P_MAIN",'{"Name":"HomeBanner","Type":"'+n.data("bannertype")+'","Value":"'+n.data("bannerid")+'"}'))):$h.a2s.sendContentsLog("P_MAIN",'{"Name":"HomeBanner","Type":"'+n.data("bannertype")+'","Value":"'+n.data("bannerid")+'"}')},autoplayStart:function(){$(".promotionBannerPagination").addClass("promotionBannerPaginationActive")},autoplayStop:function(){$(".promotionBannerPagination").removeClass("promotionBannerPaginationActive")}}});promotionBannerCnts.autoplay.stop();a=setTimeout(function(){promotionBannerCnts.autoplay.start()},100);promotionBannerCnts.el.addEventListener("mouseenter",function(){promotionBannerCnts.autoplay.stop()});promotionBannerCnts.el.addEventListener("mouseleave",function(){video_playing||promotionBannerCnts.autoplay.start()});$(".promotionBannerPagination").on("mouseenter",function(){promotionBannerCnts.autoplay.stop()});$(".promotionBannerPagination").on("mouseleave",function(){video_playing||promotionBannerCnts.autoplay.start()});$(".promotionNavigation .swiper-button-prev").on("click",function(){video_playing&&stopVideo();c();$h.a2s.sendClickLog("P_MAIN",'{"Name":"HomeBanner","Type":"Prev"}')});$(".promotionNavigation .swiper-button-prev").attr("obj","P_MAIN");$(".promotionNavigation .swiper-button-prev").attr("opt",'{"Name":"HomeBanner","Type":"Prev"}');$(".promotionNavigation .swiper-button-next").on("click",function(){video_playing&&stopVideo();s();$h.a2s.sendClickLog("P_MAIN",'{"Name":"HomeBanner","Type":"Next"}')});$(".promotionNavigation .swiper-button-next").attr("obj","P_MAIN");$(".promotionNavigation .swiper-button-next").attr("opt",'{"Name":"HomeBanner","Type":"Next"}');$(".swiper-pagination-bullet").on("click",function(){video_playing&&stopVideo();$h.a2s.sendClickLog("P_MAIN",'{"Name":"HomeBanner","Type":"Page"}')});$(".swiper-pagination-bullet").attr("obj","P_MAIN");$(".swiper-pagination-bullet").attr("opt",'{"Name":"HomeBanner","Type":"Page"}')},s=function(){n=promotionBannerList.item;r=n.length;var t=Math.floor(Math.random()*r);document.getElementById("promotionBannerCnts").innerHTML=e(t);$(".promotionBanner").addClass("promotionRandom")},u=function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!=-1?parseInt(n.split("msie")[1]):!1};return{callChangeLayout:function(){var n,t;u()&&u()<10?s():o();n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}}}();(function(){function h(n,i){var p=$(".newGame ul"),s=$("<li>"),h=$("<div>").addClass("game"),c="_self",f,e,o,u;n.extendGameInfo.gameWebUrl.hasOwnProperty("pcSiteOpenType")&&n.extendGameInfo.gameWebUrl.pcSiteOpenType===2&&(c="_blank");f=$("<a>").attr({a2s:"click",obj:"P_MAIN",opt:'{"Name":"NewGameList","GameCode":"'+n.basicGameInfo.gameCode+'"}',href:n.extendGameInfo.gameWebUrl.pcSiteUrl,target:c});e=$("<span>").addClass("gameState");n.basicGameInfo.stateList.length>0&&t(e,n);o=$("<span>").addClass("gameImg");o.append('<img src="'+getGameImage(n.extendGameInfo.gameImageList,"fileNewGame")+'" width="140" height="180" alt="">');var l=$("<span>").addClass("gameInfo"),w=$('<span class="gameName"><span>'+n.basicGameInfo.gameName.replace("|br|","<br/>")+"<\/span><\/span>"),r=$("<span>").addClass("gameDevice"),a=n.basicGameInfo.supportOS.includes("window"),v=n.basicGameInfo.supportOS.includes("android"),y=n.basicGameInfo.supportOS.includes("ios");a&&r.append('<span class="icon iconDesktop"><\/span>');a&&(v||y)&&r.append('<span class= "gameDeviceSeparator"><\/span>');v&&r.append('<span class="icon iconAndroid"><\/span>');y&&r.append('<span class="icon iconIos"><\/span>');r.append($("<span>").addClass("gameGenre").text(n.basicGameInfo.genreDetail));l.append(w).append(r);u=$("<span>").addClass("gamePeriod");n.displayDesc.includes("span")&&n.displayDesc.includes("EVENT")?u.append(n.displayDesc):u.append(i);f.append(e).append(o).append(l).append(u);h.append(f);s.append(h);p.append(s)}function l(n){var ot=$(".allGame ul.pc"),h=$('<div class="game"><\/div>'),e="",a="",k=$("<li><\/li>"),v,c,r,y,rt,p,ut,w,ft,b,l,s;$.each(n.extendGameInfo.gameImageList,function(n,t){t.gameImageType==="fileDelegate"&&(e=t.imageUrl);t.gameImageType==="fileGifImage"&&(a=t.imageUrl)});e==""&&(e="https://ssl.nexon.com/s2/p3/etc/gameimg_default_155.png");v=n.extendGameInfo.gameWebUrl.pcSiteUrl;n.extendGameInfo.gameWebUrl.cardBannerUrl!=null&&n.extendGameInfo.gameWebUrl.cardBannerUrl!=""&&(v=n.extendGameInfo.gameWebUrl.cardBannerUrl);c="_self";n.extendGameInfo.gameWebUrl.hasOwnProperty("pcSiteOpenType")&&n.extendGameInfo.gameWebUrl.pcSiteOpenType===2&&(c="_blank");var d=$('<span class="gameImg"><img src="'+e+'" data-img="'+e+'" data-gif="'+a+'" width="302" height="200" alt=""><\/span>'),g=$('<span class="gameName"><a href="'+v+'" target="'+c+'" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"AllGameList","Type":"CardView_Game","GameCode":"'+n.basicGameInfo.gameCode+"\"}'><span>"+n.basicGameInfo.gameName.replace("|br|","")+"<\/span><\/a><\/span>"),o=$('<span class="gamePeriod"><\/span>');n.basicGameInfo.gameName.replace("|br|","").length>=19&&o.addClass("gamePeriodNarrow");n.displayDesc.includes("span")&&n.displayDesc.includes("EVENT")&&o.append('<span class="event">EVENT<\/span>');o.append('<span class="gameGenre">'+n.basicGameInfo.genreDetail+"<\/span>");r=$('<span class="gameDeco"><\/span>');n.basicGameInfo.stateList.length>0&&(y=$('<span class="gameState"><\/span>'),t(y,n),r.append(y));var i=$('<span class="gameDevice"><\/span>'),nt=n.basicGameInfo.supportOS.includes("window"),tt=n.basicGameInfo.supportOS.includes("android"),it=n.basicGameInfo.supportOS.includes("ios");if(nt&&(rt=$("<a><\/a>").attr("href",n.extendGameInfo.gameWebUrl.pcSiteUrl).attr("target",c).attr("a2s","click").attr("obj","P_MAIN").attr("opt",'{"Name":"AllGameList","Type":"Windows","GameCode":"'+n.basicGameInfo.gameCode+'"}').append('<span class="icon iconDesktop"><\/span>'),i.append(rt)),nt&&(tt||it)&&i.append('<span class="gameDeviceSeparator"><\/span>'),tt&&(p=getGameStoreUrl(n.extendGameInfo.storeList,"googlestore"),p===""?i.append('<span class="iconAndroidOff"><\/span>'):(ut=$("<a><\/a>").attr("href",p).attr("a2s","click").attr("obj","P_MAIN").attr("opt",'{"Name":"AllGameList","Type":"Android","GameCode":"'+n.basicGameInfo.gameCode+'"}').append('<span class="icon iconAndroid"><\/span>'),i.append(ut))),it&&(w=getGameStoreUrl(n.extendGameInfo.storeList,"appkor"),w===""?i.append('<span class="iconIosOff"><\/span>'):(ft=$("<a><\/a>").attr("href",w).attr("a2s","click").attr("obj","P_MAIN").attr("opt",'{"Name":"AllGameList","Type":"iOS","GameCode":"'+n.basicGameInfo.gameCode+'"}').append('<span class="icon iconIos"><\/span>'),i.append(ft))),r.append(i),n.extendGameInfo.snsChannelList.length>0){var et=$('<span class="gameCommunite"><\/span>'),u="",f="";switch(n.extendGameInfo.snsChannelList[0].channel){case"nexonforum":u="iconNexon";f="넥슨포럼";break;case"navercafe":u="iconNaver";f="네이버카페";break;case"facebook":u="iconFacebook";f="페이스북";break;case"twitter":u="iconTwitter";f="트위터";break;case"youtube":u="iconYoutube";f="유튜브"}b=$('<a href="'+n.extendGameInfo.snsChannelList[0].channelUrl+'" target="_blank" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"AllGameList","Type":"Community","GameCode":"'+n.basicGameInfo.gameCode+"\"}'><\/a>");b.append('<span class="icon '+u+'"><\/span><span class="acchidden">'+f+"<\/span>");et.append(b);r.append(et)}l=$('<span class="gameCheck"><\/span>');n.extendGameInfo.inspection.isChecking&&n.basicGameInfo.state===1&&l.append('<span class="iconWindow"><\/span><span>점검중<\/span> '+n.extendGameInfo.inspection.inspectDescription);a!=""?(h.addClass("aniGif"),h.append(d).append('<span class="cateGif">GIF<\/span>').append(g).append(o).append(r).append(l)):h.append(d).append(g).append(o).append(r).append(l);k.append(h);ot.append(k);s=0;$(".game.aniGif").bind("mouseenter",function(n){var i=n.currentTarget,r=i.children[0].children[0],t;mouseIN||(mouseIN=!0,t=$(r).data("gif"),t!=""&&(st=setInterval(function(){s>500?($(r).attr("src",t),$(i).addClass("aniGifPlay"),clearInterval(st)):s=s+100},100)))});$(".game.aniGif").bind("mouseleave",function(n){var t=n.currentTarget,i=t.children[0].children[0],r=$(i).data("img");r!=""&&($(i).attr("src",r),$(t).removeClass("aniGifPlay"),clearInterval(st),s=0);mouseIN=!1})}function a(n){var h=$(".allGame ul.pc"),f="",i,u;$.each(n.extendGameInfo.gameImageList,function(n,t){t.gameImageType==="fileGnbDirect"&&(f=t.imageUrl)});i="_self";n.extendGameInfo.gameWebUrl.hasOwnProperty("pcSiteOpenType")&&n.extendGameInfo.gameWebUrl.pcSiteOpenType===2&&(i="_blank");var r=$("<li><\/li>"),e=$('<div class="game"><\/div>'),o=$("<a>").attr({a2s:"click",obj:"P_MAIN",opt:'{"Name":"AllGameList","Type":"ListView_Game","GameCode":"'+n.basicGameInfo.gameCode+'"}',href:n.extendGameInfo.gameWebUrl.pcSiteUrl,target:i}),c=$('<span class="gameImg"><img src="'+f+'" width="32" height="32" alt=""><\/span>'),l=$('<span class="gameName">'+n.basicGameInfo.gameName.replace("|br|","")+"<\/span>"),s=$('<span class="gameState"><\/span>');n.basicGameInfo.stateList.length>0&&t(s,n);o.append(c).append(l).append(s);e.append(o);r.append(e);$("#all").prop("checked")&&$(".search input[type=text]").val()==""?(u=$("#simpleUL_"+n.basicGameInfo.genreSN[0]),u.length>0&&u.append(r)):h.append(r)}function t(n,t){$.each(t.basicGameInfo.stateList,function(t,i){if(i.stateName!="0"&&i.stateName!="")switch(i.stateName){case"TEST":case"ALPHA":case"CBT":case"OBT":case"사전예약":case"사전다운로드":case"테스터모집":case"EARLY ACCESS":case"PRE-CBT":case"PRE-OBT":n.append('<span class="early">'+i.stateName+"<\/span>");break;case"TEASER":case"OPEN":case"NEW":case"REBOOT":n.append('<span class="reboot">'+i.stateName+"<\/span>");break;case"UPDATE":n.append('<span class="update">'+i.stateName+"<\/span>");break;default:n.append("<span>"+i.stateName+"<\/span>")}})}function n(t,i,r){var f,u,o,h,e,c;if($OASIS.Cookie.get("M_VT")=="thumbnailView"||$OASIS.Cookie.get("M_VT")==""?$("#thumbnail").prop("checked","checked"):$("#list").prop("checked","checked"),f=$(".allGame ul.pc"),f.empty(),u=[],f.addClass("filtering"),i==="genre"?($h.a2s.sendClickLog("P_MAIN",'{"Name":"AllGameList","Type":"Filter_Active","Value":"'+r+'"}'),t=="all"?n("","all"):$.each(gameData,function(n,i){i.basicGameInfo.genreSN.includes(Number(t))&&u.push(i)})):i==="gamename"?($h.a2s.sendClickLog("P_MAIN",'{"Name":"AllGameList","Type":"Search","Value":"'+t+'"}'),window.dataLayer.push({event:"AllGameList_Search"}),t==""?n("","all"):$.each(gameData,function(n,i){($OASIS.String.trimAll(i.basicGameInfo.gameName.toLowerCase()).includes($OASIS.String.trimAll(t.toLowerCase()))||$OASIS.String.trimAll(i.basicGameInfo.synonym.toLowerCase()).includes($OASIS.String.trimAll(t.toLowerCase())))&&u.push(i)})):i==="state"?($h.a2s.sendClickLog("P_MAIN",'{"Name":"AllGameList","Type":"Filter_Active","Value":"'+r+'"}'),t=="event"?$.each(gameData,function(n,t){t.basicGameInfo.hasEvent==!0&&u.push(t)}):$.each(gameData,function(n,t){u.push(t)})):i==="hashtag"?($h.a2s.sendClickLog("P_MAIN",'{"Name":"AllGameList","Type":"Filter_Active","Value":"'+r+'"}'),o=$(hashtagData).filter(function(n,i){return i.HashtagSN==t}),o.length>0&&$.each(o[0].GameCode,function(n,t){var i=$(gameData).filter(function(n,i){return i.gameCode===t});i.length>0&&u.push(i[0])})):i==="os"?($h.a2s.sendClickLog("P_MAIN",'{"Name":"AllGameList","Type":"Filter_Active","Value":"'+r+'"}'),$.each(gameData,function(n,i){i.basicGameInfo.supportOS.includes(t)&&u.push(i)})):($("#all").prop("checked","checked"),$(".search input[type=text]").val(""),$.each(gameData,function(n,t){u.push(t)}),$("#list").prop("checked")?$.each(genreData,function(n,t){var i=$("<li><\/li>"),r=$("<h4>"+t.genreName+"<\/h4>"),u=$('<ul id="simpleUL_'+t.genreSN+'"><\/ul>');t.genreName=="RPG"?i.addClass("col3"):i.addClass("col1");i.append(r).append(u);$(".allGame ul.pc").append(i)}):$(".allGame ul.pc").empty(),f.removeClass("filtering")),$("#thumbnail").prop("checked")&&($(".allGame ul.pc").removeClass("listView").addClass("cardView"),$("#pcGame a").show()),$("#list").prop("checked")&&($(".allGame ul.pc").removeClass("cardView").addClass("listView"),$("#pcGame a").hide()),$.each(u,function(n,t){$("#thumbnail").prop("checked")?l(t):a(t)}),$(".allGame ul.pc").children().length<=0){h=$('<li class="none"><\/li>');e=null;switch(i){case"gamename":e="<strong>'"+s(t,50)+"'<\/strong>에 대한 검색 결과가 없습니다.";break;default:e="선택한 조건의 검색결과가 없습니다.<br/>다른 조건으로 검색해주세요."}c=$('<button type="button" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"AllGameList","Type":"PC_SearchCancel"}\'>검색초기화<\/button>');h.append(e).append(c);c.bind("click",function(){$("#all").prop("checked","checked");$(".search input[type=text]").val("");n("","all")});$(".allGame ul.pc").append(h)}}var o;window.Home.init();oasisapi=$("#contents").data("oasisurl");myapi=$("#contents").data("myapiurl");gameData=[];genreData=[];hashtagData=[];MyInfo={MemberSN:0};var r=function(n,t){var i=$("."+t);i.is(n.target)||i.has(n.target).length!==0||($("html").off("click",r),i.removeClass(t+"Open"))},u=function(n,t){var i=$(t).closest("."+n);if(i.hasClass(n+"Open"))i.removeClass(n+"Open");else{$("html").on("click",function(t){r(t,n)});i.addClass(n+"Open")}},s=function(n,t){var r=!1;for(b=i=0;c=n.charCodeAt(i);){if(b+=c>>7?2:1,b>t){r=!0;break}i++}return n.substring(0,i)+(r?"...":"")};var v=function(n){if(NgbMember.IsLogin()){var t=$OASIS.SessionStorage.get("Info_"+n,!0);t==null?$.ajax({url:myapi+"/My/MyInfo?st=sso",dataType:"json",type:"GET",xhrFields:{withCredentials:!0}}).done(function(i){t=i;$OASIS.SessionStorage.set("Info_"+n,i,!0,60);f(t);e(t)}):(f(t),e(t))}},f=function(n){n.info.isPrime&&$(".myInfo .title .bt").prepend('<a href="'+$("#contents").data("primeurl")+'" class="btPrime" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"Prime"}\'><span class="icon"><\/span>PRIME<\/a>')},e=function(n){var t,i,r,u;n.info&&n.info.SecurityGrade&&(t=["A","B","C","D"],i=["정상","주의","경고","위험"],n.info.SecurityGrade.Grade&&t.indexOf(n.info.SecurityGrade.Grade)!=-1&&($("#pSecurityLevel").removeClass("security"),$("#pSecurityLevel").addClass("security"+n.info.SecurityGrade.Grade),$("#pSecurityLevel span:eq(0)").text(n.info.SecurityGrade.Grade),r=t.indexOf(n.info.SecurityGrade.Grade),$("#pSecurityLevel span:eq(2)").text(i[r])),n.info.SecurityMessage&&(u=$("<a>").attr({href:"https://security.nexon.com",a2s:"click",obj:"P_MAIN",opt:'{"Name":"Personalization","Type":"Security_MSG"}'}).text(n.info.SecurityMessage.length>22?n.info.SecurityMessage.substring(0,22)+"...":n.info.SecurityMessage),$("#dvHomeSecurityMsg").append(u)))},y=function(n){n.newGames.length>0&&($.each(n.newGames,function(n,t){$.each(gameData,function(n,i){i.appSN==t.appSN&&h(i,t.promotionText)})}),$(".newGame").show())},p=function(t){if(t.gameList.length>0){gameData=t.gameList;genreData=t.genreList;hashtagData=t.hashTagList;NgbMember.IsLogin()?($OASIS.Cookie.set("M_JL","1",365),$.ajax({url:oasisapi+"/Account/info",dataType:"json",type:"GET",xhrFields:{withCredentials:!0}}).done(function(n){$(".myInfo .title h2").html("<span><\/span> 님, 어서오세요");$(".myInfo .title h2 span").text(n.UserNick);$(".myInfo .title").append($("<p><span>"+n.LastLoginedDateTime+'<\/span> <a href="'+n.LoginHistory+'" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"LoginLog"}\'>로그인내역<\/a><\/p>'));$(".myInfo .title .bt").append('<a href="'+n.MyInfoUrl+'" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"My_Member"}\'>내정보<\/a>');$(".myInfo .title .bt").append('<a href="#" onclick="sendClick2Log(this); NgbLogin.Logout(location.href)" obj="P_MAIN" opt=\'{"Name":"Personalization","Type": "Logout" }\'>로그아웃<\/a>');callMyGame(t,n.MemberSN);loadNCC(n.MemberSN);v(n.MemberSN)}),$.ajax({url:oasisapi+"/Account/cashinfo",dataType:"json",type:"GET",xhrFields:{withCredentials:!0},success:function(n){$(".stateCash.nexoncash").text(n.CashBalance);$(".stateCash.playpoint").text(n.PointBalance);$("#btnCash").attr("href",n.CashUrl);$("#btnCharge").click(function(){return window.open(oasisapi+"/account/cashcharge","NXRIPAY","width=840,height=620,toolbar=no,status=no,directories=no,scrollbars=no,location=no,resizable=no,menubar=no"),!1});$("#autoCharge").click(function(){return window.open(oasisapi+"/account/autocharge","NXJMONEY","width=954,height=700,scrollbars=1,resizable=1"),!1})}})):(callMyGame(t,0),loadNCC(0));$OASIS.Cookie.get("M_JL")==""?($(".join .tooltipCnts").append('<a href="https://member.nexon.com/join/join.aspx" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Personalization","Type":"JoinLayer"}\'>지금 넥슨 회원가입하시고 <strong>'+gameData.length+"개 넥슨게임을 무료<\/strong>로 플레이하세요<\/a>"),$(".join .tooltip").removeClass("tooltipClose").addClass("tooltipOpen"),$h.a2s.sendContentsLog("P_MAIN",'{"Name":"Personalization","Type":"JoinLayer"}')):$(".join .tooltip").removeClass("tooltipOpen").addClass("tooltipClose");$.each(hashtagData,function(n,t){var i=$("<span><\/span>"),r=$('<input type="radio" name="filter" obj="P_MAIN" opt=\'{"Name":"AllGameList","Type":"Filter_Active","Value":"'+t.Hashtag+'"}\' data-selector="hashtag" data-name="'+t.Hashtag+'" value="'+t.HashtagSN+'" id="hashtag_'+t.HashtagSN+'"><label for="hashtag_'+t.HashtagSN+'">#'+t.Hashtag+"<\/label><\/span>");i.append(r);n==0?$(".platform span").first().after(i):$(".platform span").last().after(i)});$.each([{osKey:"window",osName:"Windows"},{osKey:"android",osName:"Android"},{osKey:"ios",osName:"iOS"}],function(n,t){var i=$("<span><\/span>"),r=$('<input type="radio" name="filter" obj="P_MAIN" opt=\'{"Name":"AllGameList","Type":"Filter_Active","Value":"'+t.osName+'"}\' data-selector="os" data-name="'+t.osName+'" value="'+t.osKey+'" id="os_'+t.osKey+'"><label for="os_'+t.osKey+'">#'+t.osName+"<\/label><\/span>");i.append(r);$(".platform span").last().after(i)});$.each(genreData,function(n,t){var i=$("<span><\/span>"),r=$('<input type="radio" name="filter" obj="P_MAIN" opt=\'{"Name":"AllGameList","Type":"Filter_Active","Value":"'+t.genreName+'"}\' data-selector="genre" data-name="'+t.genreName+'" value="'+t.genreSN+'" id="genre_'+t.genreSN+'"><label for="genre_'+t.genreSN+'">#'+t.genreName+"<\/label><\/span>");i.append(r);$(".platform span").last().after(i)});n("0","all");$("#thumbnail").prop("checked")?$h.a2s.sendContentsLog("P_MAIN",'{"Name":"AllGameList","Type":"CardView"}'):$h.a2s.sendContentsLog("P_MAIN",'{"Name":"AllGameList","Type":"ListView"}');$(".platform span").last().after($('<span><input type="radio" name="filter" obj="P_MAIN" opt=\'{"Name":"AllGameList","Type":"Filter_Active","Value":"event"}\' data-selector="state" data-name="EVENT" value="event" id="state_event"><label for="state_event">#이벤트<\/label><\/span>'));$('input[name="filter"]:radio').bind("click",function(){n(this.value,$(this).data("selector"),$(this).data("name"));$(".search input[type=text]").val("")});$(".search button").bind("click",function(){$("#all").prop("checked","checked");n($(".search input[type=text]").val(),"gamename")});$(".search input[type=text]").bind("keypress",function(t){t.keyCode==13&&($("#all").prop("checked","checked"),n($(".search input[type=text]").val(),"gamename"))})}},w=function(n){n.noticeList.length>0?$(".notice").append('<a href="http://notice.nexon.com/Notice/NoticeView?sn='+n.noticeList[0].noticesn+'&maskgamecode=65536" onclick="sendClick2Log(this);" obj="P_MAIN" opt=\'{"Name":"Footer","Type":"Notice"}\'>'+n.noticeList[0].noticecodename+" "+n.noticeList[0].title+"<\/a>"):$(".notice").remove()};window.Home.Components.Storage.addSubscriber({label:"mainData",callback:function(n){n?(p(n),window.Home.Components.Storage.addSubscriber({label:"newGameData",callback:function(n){y(n)}}),window.Home.Components.Storage.fetchData("newGameData")):document.location.href="https://bulletin.nexon.com/Home/Game.html"}});window.Home.Components.Storage.fetchData("mainData");window.Home.Components.Storage.addSubscriber({label:"noticeData",callback:function(n){w(n)}});window.Home.Components.Storage.fetchData("noticeData");$OASIS.Cookie.get("M_VL")==""&&$($(".viewtype .tooltip")[0]).addClass("tooltipOpen");$(".tooltip > a").on("click",function(n){n.preventDefault();u("tooltip",this)});$(".language h3 a").on("click",function(n){n.preventDefault();u("language",this)});o=function(){var n=$(".floating"),i=$(".footer").offset(),r=i.top-$(window).height(),t=$(window).scrollTop();t!=0?n.addClass("floatingTopBtShow"):n.removeClass("floatingTopBtShow");t<r?n.removeClass("floatingTopBtHold"):n.addClass("floatingTopBtHold")};$(window).scroll(o);$(".viewtype input[type=radio]").on("change",function(){$OASIS.Cookie.remove("M_VT");var t="thumbnail";t=$("#thumbnail").prop("checked")?"thumbnailView":"simpleView";$OASIS.Cookie.set("M_VT",t,365);$("#all").prop("checked","checked");$(".search input[type=text]").val("");n("","all")})})();window.onpageshow=function(n){(n.persisted||window.performance&&window.performance.navigation.type==2)&&$("#all").prop("checked","checked")};applicationServerPublicKey="BC4_7HbmqdeAlQyHnGkMPsg0_Y1-f9us8gXgXFCB-ZAaTDEb4B6-csf6Ibz8hXogBBWb8JXPJVNDkI56n94RYFo";swRegistration=null;window.Home.Components.Storage.addSubscriber({label:"notificationBannerData",callback:function(n){n.result&&showNotificationLayer()}});window.Home.Components.Storage.addSubscriber({label:"notificationData",callback:function(n){n.result&&new Notification("NEXON",{body:"넥슨의 다양한 소식을 빠르게 알려드릴게요!",icon:"https://rs.nxfs.nexon.com/common/images/logo_256x256.png",badge:"https://rs.nxfs.nexon.com/common/images/logo_256x256.png"})}});"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(function(n){n?(swRegistration=n,readyNotificationPermission()):navigator.serviceWorker.register("/sw.js").then(function(n){swRegistration=n;readyNotificationPermission()}).catch(function(n){console.error("Service Worker Error",n)})})